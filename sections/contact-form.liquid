{% comment %}
  Contact Form Section
{% endcomment %}

<div class="container mx-auto px-6 py-16">
  <div class="max-w-4xl mx-auto">
    
    <div class="text-center mb-12">
      {% if section.settings.heading != blank %}
        <h1 class="font-display text-5xl md:text-6xl uppercase text-white mb-4">
          {{ section.settings.heading }}
        </h1>
      {% endif %}
      {% if section.settings.description != blank %}
        <p class="text-neutral-400 text-lg">
          {{ section.settings.description }}
        </p>
      {% endif %}
    </div>

    {% if section.blocks.size > 0 %}
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-16">
        {% for block in section.blocks %}
          {% case block.type %}
            {% when 'contact_info' %}
              <div class="text-center" {{ block.shopify_attributes }}>
                <div class="w-16 h-16 bg-brand-red rounded-full flex items-center justify-center mx-auto mb-4">
                  {% if block.settings.icon == 'email' %}
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white">
                      <rect width="20" height="16" x="2" y="4" rx="2"></rect>
                      <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path>
                    </svg>
                  {% elsif block.settings.icon == 'phone' %}
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white">
                      <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
                    </svg>
                  {% elsif block.settings.icon == 'location' %}
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white">
                      <path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"></path>
                      <circle cx="12" cy="10" r="3"></circle>
                    </svg>
                  {% endif %}
                </div>
                {% if block.settings.title != blank %}
                  <h3 class="font-display text-xl uppercase text-white mb-2">
                    {{ block.settings.title }}
                  </h3>
                {% endif %}
                {% if block.settings.content != blank %}
                  <p class="text-neutral-400">
                    {{ block.settings.content }}
                  </p>
                {% endif %}
              </div>
          {% endcase %}
        {% endfor %}
      </div>
    {% endif %}

    {% form 'contact' %}
      {% if form.posted_successfully? %}
        <div class="bg-green-900/20 border border-green-500 text-green-500 p-4 rounded-sm mb-8">
          Thanks for contacting us. We'll get back to you as soon as possible.
        </div>
      {% endif %}

      {% if form.errors %}
        <div class="bg-red-900/20 border border-red-500 text-red-500 p-4 rounded-sm mb-8">
          {{ form.errors | default_errors }}
        </div>
      {% endif %}

      <div class="bg-brand-charcoal p-8 rounded-sm">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
          <div>
            <label for="ContactFormName" class="block text-white font-bold mb-2">
              Name *
            </label>
            <input 
              type="text"
              id="ContactFormName"
              name="contact[name]"
              required
              class="w-full bg-brand-black text-white border border-white/10 px-4 py-3 rounded-sm focus:outline-none focus:border-brand-red"
            />
          </div>

          <div>
            <label for="ContactFormEmail" class="block text-white font-bold mb-2">
              Email *
            </label>
            <input 
              type="email"
              id="ContactFormEmail"
              name="contact[email]"
              required
              class="w-full bg-brand-black text-white border border-white/10 px-4 py-3 rounded-sm focus:outline-none focus:border-brand-red"
            />
          </div>
        </div>

        <div class="mb-6">
          <label for="ContactFormPhone" class="block text-white font-bold mb-2">
            Phone
          </label>
          <input 
            type="tel"
            id="ContactFormPhone"
            name="contact[phone]"
            class="w-full bg-brand-black text-white border border-white/10 px-4 py-3 rounded-sm focus:outline-none focus:border-brand-red"
          />
        </div>

        <div class="mb-6">
          <label for="ContactFormMessage" class="block text-white font-bold mb-2">
            Message *
          </label>
          <textarea 
            id="ContactFormMessage"
            name="contact[body]"
            rows="6"
            required
            class="w-full bg-brand-black text-white border border-white/10 px-4 py-3 rounded-sm focus:outline-none focus:border-brand-red resize-none"
          ></textarea>
        </div>

        <button 
          type="submit"
          class="w-full bg-brand-red text-white px-8 py-4 rounded-sm font-bold uppercase tracking-widest hover:bg-red-700 transition"
        >
          Send Message
        </button>
      </div>
    {% endform %}
  </div>
</div>

{% schema %}
{
  "name": "Contact Form",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Contact Us"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Description",
      "default": "Have a question? We're here to help."
    }
  ],
  "blocks": [
    {
      "type": "contact_info",
      "name": "Contact Info",
      "settings": [
        {
          "type": "select",
          "id": "icon",
          "label": "Icon",
          "options": [
            { "value": "email", "label": "Email" },
            { "value": "phone", "label": "Phone" },
            { "value": "location", "label": "Location" }
          ],
          "default": "email"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title"
        },
        {
          "type": "textarea",
          "id": "content",
          "label": "Content"
        }
      ]
    }
  ],
  "max_blocks": 3,
  "presets": [
    {
      "name": "Contact Form",
      "blocks": [
        {
          "type": "contact_info",
          "settings": {
            "icon": "email",
            "title": "Email",
            "content": "support@richhabits.com"
          }
        },
        {
          "type": "contact_info",
          "settings": {
            "icon": "phone",
            "title": "Phone",
            "content": "(555) 123-4567"
          }
        },
        {
          "type": "contact_info",
          "settings": {
            "icon": "location",
            "title": "Location",
            "content": "Austin, TX"
          }
        }
      ]
    }
  ]
}
{% endschema %}
